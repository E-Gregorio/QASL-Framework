<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Historia de Usuario — HU_SGINC_04</title>
<style>
  body { font-family: Arial, sans-serif; margin: 20px; line-height: 1.6; }
  .us-container { max-width: 900px; margin: 0 auto; }
  .us-header { background: #5C85D6; color: white; padding: 15px; text-align: center; font-weight: bold; font-size: 20px; margin-bottom: 0; }
  .us-table { width: 100%; border-collapse: collapse; margin: 0; }
  .us-table td { border: 1px solid #000; padding: 12px; vertical-align: top; }
  .label { background: #5C85D6; color: white; font-weight: bold; width: 200px; }
  .content { background: white; }
  .link-ref { color: #2196F3; text-decoration: underline; font-style: italic; }
  .description-format { margin: 5px 0; }
  .scenario-title { font-weight: bold; margin-top: 10px; }
  .scenario-content { margin-bottom: 10px; font-family: 'Courier New', monospace; background: #f5f5f5; padding: 10px; border-left: 3px solid #5C85D6; }
  .scenario-nuevo { border-left: 3px solid #4CAF50; background: #f1f8e9; }
  .bullet-point { margin-left: 0; margin-bottom: 5px; }
  .out-scope-item { margin-bottom: 10px; }
  .badge { display: inline-block; padding: 2px 8px; border-radius: 3px; font-size: 11px; margin-left: 8px; }
  .badge-original { background: #5C85D6; color: white; }
  .badge-agregado { background: #4CAF50; color: white; }
  .badge-br { background: #FF9800; color: white; }
  .br-item { margin: 5px 0; }
  .cobertura-info { background: #e3f2fd; padding: 10px; margin-top: 10px; border-radius: 5px; font-size: 12px; }
</style>
</head>
<body>
<div class="us-container">
  <div class="us-header">HISTORIA DE USUARIO</div>
  <table class="us-table">
    <tr>
      <td class="label">ID</td>
      <td class="content">HU_SGINC_04</td>
    </tr>
    <tr>
      <td class="label">Nombre</td>
      <td class="content">Importar Lote</td>
    </tr>
    <tr>
      <td class="label">Épica</td>
      <td class="content">
        Módulo Alta de Inconsistencias<br>
        <span class="link-ref">Enlace a documentación de la Épica</span>
      </td>
    </tr>
    <tr>
      <td class="label">Prioridad</td>
      <td class="content">Alta – MVP 1</td>
    </tr>
    <tr>
      <td class="label">Estado</td>
      <td class="content">Análisis Estático Completado - Cobertura: 41.7% → 100%</td>
    </tr>
    <tr>
      <td class="label">Descripción</td>
      <td class="content">
        <div class="description-format"><strong>Como</strong> Agentes de AGIP autorizados por la SDGS, con usuario IAM, habilitado por el área de seguridad informática para SIGMA, con perfil CARGA.</div>
        <div class="description-format"><strong>Quiero</strong> Importar un lote, de información</div>
        <div class="description-format"><strong>Para</strong> Enriquecer el conjunto de inconsistencias detectadas</div>
      </td>
    </tr>
    <tr>
      <td class="label">Usuarios / Roles</td>
      <td class="content">Agentes de AGIP autorizados por la SDGS, con usuario IAM, habilitado por el área de seguridad informática para SIGMA, con perfil CARGA.</td>
    </tr>
    <tr>
      <td class="label">Reglas de Negocio</td>
      <td class="content">
        <div class="br-item"><strong>BR1:</strong> La acción “Importar Lote” se muestra desde la pantalla de grilla de inconsistencias.</div><div class="br-item"><strong>BR2:</strong> El usuario debe poder seleccionar un archivo desde su equipo con los datos que se detallan en la referencia al modelo de datos y el ejemplo de archivo de importación.</div><div class="br-item"><strong>BR3:</strong> Si el proceso de importación del archivo es exitoso los registros importados se visualizarán en una grilla pop up, para validar los datos.</div><div class="br-item"><strong>BR4:</strong> Si los datos obligatorios de una fila no están completos, la grilla pop up de importación permanece y se muestra el mensaje “Faltan los datos obligatorios” marcando los datos faltantes.</div><div class="br-item"><strong>BR5:</strong> Si los datos están completos, se agregan a las entidades correspondientes El CUIT y Razón social del contribuyente, que se van a agregar si no existe en la entidad contribuyente se agrega con el estado “Ingresado”, si ya existe se agrega con el estado “Actualizado”. El Código de Actividad para el CUIT, en caso de no existir para el contribuyente se agrega como un nuevo código y se relaciona con la entidad Actividades Comerciales para extraer su descripción. Para el tipo de tributo por cada CUIT se agrega un registro para el período importado, si el Anticipo, TRX y Régimen ya existen se debe rechazar la importación por duplicación. el resto de los datos según el [detalle](https://docs.google.com/document/d/1Eqk-gB_Yvlj6lmB12hw-vaH6WCW0oV2Hl03d876WC5I/edit?tab=t.0#heading=h.8ktz6f6neek2), para el CUIT y el Tributo, en la entidad Inconsistencia, con Estado \= “Ingresada” y Origen \= “PAF”</div><div class="br-item"><strong>BR6:</strong> El proceso puede ser exitoso o erróneo y en ambos casos debe informar el resultado.</div>
        <span class="link-ref">CU-XXX | Casos de uso relacionados</span>
      </td>
    </tr>
    <tr>
      <td class="label">Precondiciones</td>
      <td class="content">
        • Usuario autenticado en el sistema<br>• Permisos correspondientes asignados al rol del usuario<br>• Sistema SIGMA operativo y accesible<br>• Datos de prueba disponibles en el entorno
      </td>
    </tr>
    <tr>
      <td class="label">Dependencias</td>
      <td class="content">
        • Integración con Keycloak (Access Manager) operativa<br>• Base de datos disponible y configurada<br>• APIs de backend funcionando correctamente
      </td>
    </tr>
    <tr>
      <td class="label">Estimaciones</td>
      <td class="content">
        Story Points (SP): ____<br>
        Valor (V 1–3): ____<br>
        Costo (C 1–3): ____<br>
        Probabilidad (P 1–3): ____<br>
        Impacto (I 1–3): ____<br>
        <strong>Riesgo (R) = P × I = ____ × ____ = ____</strong><br>
        <strong>Total VCR = V + C + R = ____ + ____ + ____ = ____</strong><br>
        <em>Política:</em> si <strong>VCR ≥ 9</strong> → Deuda técnica (automatizar y pasa a regresión); si es menor → Pruebas manuales.
      </td>
    </tr>
    <tr>
      <td class="label">Escenarios de Prueba (Criterios de Aceptación)</td>
      <td class="content">
        
<div class="scenario-title">E1: E1 – Mostrar opción de importar <span class="badge badge-original">Original</span></div>
<div class="scenario-content"><strong>DADO</strong> que accedo con perfil CARGA<br><strong>CUANDO</strong> estoy en la pantalla de la grilla de inconsistencias y selecciono la opción “Importar Lote”<br><strong>ENTONCES</strong> visualizo  un POP UP para cargar la información general del lote. Tributo: nombre del tributo (ISIB para MPV) Obligatorio. **Campaña**: (p/edición desplegable según Anexo Lista: Campañas) Obligatorio. Recategorización RS CAT( A,B,C,D,E,F,G,H,I,J) Exclusión de Régimen Simplificado CM-CL Dif. Alícuota Diferencia de Base Imponible entre ISIB e IVA **Línea de Investigación**: (p/edición desplegable según Anexo Lista: Línea de Investigación) Obligatorio. **Cruce de información** Denuncia Pedido de superioridad o de otra área **Motivo**: (p/edición desplegable según Anexo Lista: Motivo) Obligatorio.  Diferencia de alícuota  Diferencia de base imponible  Actividad no declarada Tratamiento de exento improcedente  Incremento patrimonial o injustificado  Descuentos improcedentes  Retenciones informadas incorrectamente **Origen**: PAF Obligatorio</div>
<div class="scenario-title">E2: E2 – Seleccionar archivo e importar <span class="badge badge-original">Original</span></div>
<div class="scenario-content"><strong>DADO</strong> que selecciono la funcionalidad “Importar Lote”<br><strong>CUANDO</strong> elijo un archivo con el formato definido<br><strong>ENTONCES</strong> el sistema carga los registros en la grilla de inconsistencias pop up</div>
<div class="scenario-title">E3: E3 – Guardar filas válidas <span class="badge badge-original">Original</span></div>
<div class="scenario-content"><strong>DADO</strong> que el archivo contiene filas con todos los datos obligatorios<br><strong>CUANDO</strong> presiono “Guardar”<br><strong>ENTONCES</strong> el sistema agrega los datos en las entidades Contribuyente, Actividad e Inconsistencia según corresponda<br><strong>Y</strong> muestra “Registros guardados con éxito: \<cantidad\>”</div>
<div class="scenario-title">E4: E4 – Fila con datos faltantes <span class="badge badge-original">Original</span></div>
<div class="scenario-content"><strong>DADO</strong> que falta un dato obligatorio en una fila<br><strong>CUANDO</strong> presiono “Guardar”<br><strong>ENTONCES</strong> se muestra “Faltan los datos obligatorios”<br><strong>Y</strong> la grilla permanece marcando los datos faltantes</div>
<div class="scenario-title">E5: E5 – Error de importación <span class="badge badge-original">Original</span></div>
<div class="scenario-content"><strong>DADO</strong> que el archivo es erróneo<br><strong>CUANDO</strong> termina el proceso<br><strong>ENTONCES</strong> el sistema informa el error<br><strong>Y</strong> mantiene la grilla</div>
<div class="scenario-title">E6: Falta escenario negativo para BR1 <span class="badge badge-agregado">Agregado</span> <span class="badge badge-br">BR1</span></div>
<div class="scenario-content scenario-nuevo"><strong>DADO</strong> que accedo al sistema con un usuario SIN el perfil CARGA<br><strong>CUANDO</strong> estoy en la pantalla de la grilla de inconsistencias<br><strong>ENTONCES</strong> NO visualizo la opción “Importar Lote”<br><strong>Y</strong> la opción “Importar Lote” no está disponible</div>
<div class="scenario-title">E7: Falta escenario negativo para BR2 <span class="badge badge-agregado">Agregado</span> <span class="badge badge-br">BR2</span></div>
<div class="scenario-content scenario-nuevo"><strong>DADO</strong> que selecciono la funcionalidad “Importar Lote”<br><strong>CUANDO</strong> elijo un archivo con un formato NO válido<br><strong>ENTONCES</strong> el sistema muestra un mensaje de error indicando que el formato del archivo es incorrecto<br><strong>Y</strong> el sistema no carga los registros</div>
<div class="scenario-title">E8: Falta escenario negativo para BR3 <span class="badge badge-agregado">Agregado</span> <span class="badge badge-br">BR3</span></div>
<div class="scenario-content scenario-nuevo"><strong>DADO</strong> que selecciono la funcionalidad “Importar Lote”<br><strong>CUANDO</strong> el proceso de importación falla<br><strong>ENTONCES</strong> NO se visualiza la grilla pop up con los registros<br><strong>Y</strong> se muestra un mensaje de error indicando la falla</div>
<div class="scenario-title">E9: Falta escenario positivo para BR4 <span class="badge badge-agregado">Agregado</span> <span class="badge badge-br">BR4</span></div>
<div class="scenario-content scenario-nuevo"><strong>DADO</strong> que todas las filas tienen los datos obligatorios completos<br><strong>CUANDO</strong> presiono “Guardar”<br><strong>ENTONCES</strong> NO se muestra el mensaje “Faltan los datos obligatorios”<br><strong>Y</strong> el sistema procede a guardar los datos</div>
<div class="scenario-title">E10: Falta escenario negativo para BR5 <span class="badge badge-agregado">Agregado</span> <span class="badge badge-br">BR5</span></div>
<div class="scenario-content scenario-nuevo"><strong>DADO</strong> que el archivo contiene datos duplicados de Anticipo, TRX y Régimen para un CUIT y período<br><strong>CUANDO</strong> presiono “Guardar”<br><strong>ENTONCES</strong> el sistema muestra un mensaje de error indicando que existen datos duplicados y la importación se rechaza<br><strong>Y</strong> no se guardan los registros duplicados</div>
        <div class="cobertura-info">
          <strong>Análisis de Cobertura:</strong> 5 escenarios originales + 5 escenarios agregados = 10 total<br>
          <strong>Cobertura:</strong> 41.7% inicial → 100% final
        </div>
      </td>
    </tr>
    <tr>
      <td class="label">Dentro del Alcance</td>
      <td class="content">
        • Validación de todas las reglas de negocio documentadas<br>• Escenarios de prueba positivos (flujos exitosos)<br>• Escenarios de prueba negativos (casos de error)<br>• Integración con Access Manager (Keycloak)<br>• Gestión de perfiles y permisos según roles
      </td>
    </tr>
    <tr>
      <td class="label">Fuera del Alcance</td>
      <td class="content">
        <div class='out-scope-item'>• Funcionalidades de otras historias de usuario<br>* Cubiertas por: <span class='link-ref'>HUs relacionadas</span></div><div class='out-scope-item'>• Gestión técnica de infraestructura<br>* Proceso backend/DevOps</div><div class='out-scope-item'>• Configuración de sistemas externos<br>* Responsabilidad de equipos especializados</div>
      </td>
    </tr>
    <tr>
      <td class="label">Referencias</td>
      <td class="content">
        <span class="link-ref">Documento de Requerimientos</span><br>
        <span class="link-ref">Casos de Uso asociados</span><br>
        <span class="link-ref">IEEE 829 - Test Documentation</span><br>
        <span class="link-ref">ISTQB Foundation Level Syllabus</span>
      </td>
    </tr>
    <tr>
      <td class="label">Notas / Comentarios</td>
      <td class="content">
        <strong>Análisis Estático:</strong> 5 gaps identificados y corregidos mediante escenarios sugeridos.<br>
        <strong>Cobertura Final:</strong> 100% de las reglas de negocio cubiertas.<br>
        <strong>Generado por:</strong> SIGMA Static Analyzer v3.0 AI | 2025-11-29 09:22
      </td>
    </tr>
  </table>
</div>
</body>
</html>